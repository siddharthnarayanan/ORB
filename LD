Table table;
Table peopleTable;

float[][] similarWeight;
float[][] similarWeightMag;

int[] peopleProj_Index;
int[] indivPeople_Index;
String[] indiv_Participants; 

/**
 * Loads all the data to display on the orb
 */
void loadData() {
  // initialize all the data structures
  peopleToProject = new HashMap<Integer, Integer>();
  shortName = new String[tableTotal];
  studioName = new String[tableTotal];
  videoLoad = new boolean[tableTotal];
  imageLoad = new boolean[tableTotal];
  projTitle = new String[tableTotal];
  projDescrip = new String[tableTotal];
  projPeople = new String[tableTotal];
  isPerson = new boolean[tableTotal];
  similarIndex = new int [tableTotal] [simTotal];
  similarWeight = new float[tableTotal] [simTotal];
  similarWeightMag = new float[tableTotal] [simTotal];
  peopleProj_Index = new int[peopleTotal];
  indiv_Participants = new String[peopleTotal];
  indivPeople_Index = new int[peopleTotal];
  flaggedParticipant = new boolean[peopleTotal];
  
  for (int i = 0; i<tableTotal; i++) 
  {    
    rowIterate =  table.getRow(i);   
    shortName[i] = rowIterate.getString("Short Name");
    studioName[i] = rowIterate.getString("Studio");
    isPerson[i] = studioName[i].toLowerCase().equals("people");
    videoLoad[i] = rowIterate.getInt("Video_Load") == 1;
    imageLoad[i] = rowIterate.getInt("No_of_Photos") > 0;
    projTitle[i] = rowIterate.getString("Project Title");
    projDescrip[i] = rowIterate.getString("Full Description");
    projPeople[i] = rowIterate.getString("Participants");
    
    // gets all the similar projects
    for (int j = 1; j < 11; j++)
    {
      int similiarElementIndex = rowIterate.getInt(" Project_index_" + j);
      float similiarElementWeight = rowIterate.getFloat(" Similarity_" + j);
      if (similiarElementIndex == -1)
    {
      similarIndex [i] [j] = rowIterate.getInt(" Project_index_" + (j+1));
      similarWeight [i] [j] = rowIterate.getFloat(" Similarity_" + (j+1));
      similarWeightMag [i][j] = map(similarWeight[i][j], minWeight, maxWeight, 40, 100);
    }

  // gets all the people for each project
  for (int i = 0; i < peopleTotal; i++) {
    rowIteratePeople = peopleTable.getRow(i);
    peopleProj_Index[i] = rowIteratePeople.getInt("peopleProj_Index");
    indiv_Participants[i] = rowIteratePeople.getString("Indiv_Participants");
    indivPeople_Index[i] = rowIteratePeople.getInt("indivPeople_Index"); //this refers to the unigue ID for the Point in space for that individual
  }
  
  // flags participants that are a project
  // this will allow the project to be displayed
  // instead of the person label
  for (int i = 0; i < peopleTotal; i++)
      String split[] = indiv_Participants[i].split(" ");
      int number = split.length;
      String compare = indiv_Participants[i];
      if (number == 3)
        compare = split[0] + " " + split[2];
      if (shortName[j].equals(compare) || shortName[j].equals(indiv_Participants[i]))
      {
        peopleToProject.put(i, j);
        flaggedParticipant[i] = true;
        break;
      }
    } 
  }
Mag [i][j] = map(similarWeight[i][j], 0.026698905, 0.630097611, 60*aniMag, 100*aniMag);
    }
  }
}

